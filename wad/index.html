<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management | Grocery System</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body class="bg-light">

    <!-- Sidebar/Navigation (Mobile responsive offcanvas behavior handled by bootstrap classes if needed, or simple topbar for now to save space) -->
    <div class="d-flex" id="wrapper">

        <!-- Sidebar -->
        <div class="sidebar text-white shadow-lg" id="sidebar-wrapper">
            <div class="sidebar-heading text-center py-4 fs-4 fw-bold text-uppercase border-bottom border-secondary">
                <i class="bi bi-basket2-fill me-2 text-primary-accent"></i>Inv. Management
            </div>
            <div class="list-group list-group-flush my-3">
                <a href="#" class="list-group-item list-group-item-action bg-transparent text-white active-nav-link"
                    id="nav-dashboard">
                    <i class="bi bi-speedometer2 me-2"></i>Dashboard
                </a>
                <a href="#" class="list-group-item list-group-item-action bg-transparent text-white" id="nav-inventory">
                    <i class="bi bi-box-seam me-2"></i>Inventory
                </a>
                <a href="#" class="list-group-item list-group-item-action bg-transparent text-white" id="nav-analytics">
                    <i class="bi bi-graph-up me-2"></i>Analytics
                </a>
            </div>

            <div class="sidebar-footer p-3">
                <div class="user-info d-flex align-items-center p-2 rounded glass-effect">
                    <div
                        class="avatar bg-primary-accent rounded-circle d-flex align-items-center justify-content-center text-dark fw-bold me-2">
                        AD
                    </div>
                    <div>
                        <small class="d-block fw-bold">Admin User</small>
                        <small class="text-white-50" style="font-size: 0.75rem;">Manager</small>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper" class="w-100 position-relative">
            <nav class="navbar navbar-expand-lg navbar-light bg-transparent py-4 px-4">
                <div class="d-flex align-items-center w-100 justify-content-between">
                    <div class="input-group search-bar glass-effect rounded-pill overflow-hidden w-50 shadow-sm">
                        <span class="input-group-text bg-transparent border-0 ps-3"><i
                                class="bi bi-search text-muted"></i></span>
                        <input type="text" class="form-control bg-transparent border-0 shadow-none"
                            placeholder="Search for products, categories..." id="globalSearch">
                    </div>

                    <div class="d-flex align-items-center gap-3">
                        <button class="btn btn-icon glass-effect" onclick="refreshApp()" title="Refresh Data">
                            <i class="bi bi-arrow-clockwise"></i>
                        </button>

                        <div class="dropdown">
                            <button class="btn btn-icon glass-effect position-relative" type="button"
                                id="notificationDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi bi-bell"></i>
                                <span
                                    class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle d-none"
                                    id="notif-badge">
                                    <span class="visually-hidden">New alerts</span>
                                </span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end shadow border-0 p-0"
                                aria-labelledby="notificationDropdown" style="width: 300px;">
                                <li class="p-3 border-bottom fw-bold text-muted bg-light rounded-top">Notifications</li>
                                <div id="notification-list" style="max-height: 300px; overflow-y: auto;">
                                    <!-- Populated by JS -->
                                    <li class="p-4 text-center text-muted small">No new notifications</li>
                                </div>
                            </ul>
                        </div>

                        <button class="btn btn-primary-gradient shadow-lg rounded-pill px-4" data-bs-toggle="modal"
                            data-bs-target="#addItemModal">
                            <i class="bi bi-plus-lg me-2"></i>Add Item
                        </button>
                    </div>
                </div>
            </nav>

            <div class="container-fluid px-4 pb-5">

                <!-- Dashboard View -->
                <div id="view-dashboard" class="fade-in">
                    <div class="row g-4 mb-4">
                        <div class="col-md-6 col-lg-3">
                            <div class="card stat-card border-0 shadow-sm h-100">
                                <div class="card-body p-4">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div>
                                            <p class="text-muted fw-medium mb-1">Total Products</p>
                                            <h3 class="fw-bold mb-0 count-up" data-target="1240">0</h3>
                                        </div>
                                        <div class="icon-box bg-info-subtle text-info rounded-3">
                                            <i class="bi bi-layers-fill"></i>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <span class="badge bg-success-subtle text-success rounded-pill px-2 py-1"><i
                                                class="bi bi-arrow-up-short"></i> 12%</span>
                                        <small class="text-muted ms-1">vs last month</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <div class="card stat-card border-0 shadow-sm h-100">
                                <div class="card-body p-4">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div>
                                            <p class="text-muted fw-medium mb-1">Total Value</p>
                                            <h3 class="fw-bold mb-0">$<span class="count-up"
                                                    data-target="45230">0</span></h3>
                                        </div>
                                        <div class="icon-box bg-success-subtle text-success rounded-3">
                                            <i class="bi bi-currency-dollar"></i>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <span class="badge bg-success-subtle text-success rounded-pill px-2 py-1"><i
                                                class="bi bi-arrow-up-short"></i> 5.8%</span>
                                        <small class="text-muted ms-1">vs last month</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <div class="card stat-card border-0 shadow-sm h-100">
                                <div class="card-body p-4">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div>
                                            <p class="text-muted fw-medium mb-1">Low Stock</p>
                                            <h3 class="fw-bold mb-0 text-warning count-up" data-target="15">0</h3>
                                        </div>
                                        <div class="icon-box bg-warning-subtle text-warning rounded-3">
                                            <i class="bi bi-exclamation-triangle-fill"></i>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <span class="badge bg-danger-subtle text-danger rounded-pill px-2 py-1"><i
                                                class="bi bi-arrow-up-short"></i> 2</span>
                                        <small class="text-muted ms-1">new alerts</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-3">
                            <div class="card stat-card border-0 shadow-sm h-100">
                                <div class="card-body p-4">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <div>
                                            <p class="text-muted fw-medium mb-1">Categories</p>
                                            <h3 class="fw-bold mb-0 count-up" data-target="8">0</h3>
                                        </div>
                                        <div class="icon-box bg-primary-subtle text-primary rounded-3">
                                            <i class="bi bi-grid-fill"></i>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <small class="text-muted">Distributed evenly</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Low Stock Alert and Recent Activity -->
                    <div class="row g-4">
                        <div class="col-lg-8">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-transparent border-0 p-4">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h5 class="fw-bold mb-0">Recent Transactions</h5>
                                        <button class="btn btn-sm btn-outline-secondary rounded-pill"
                                            data-bs-toggle="modal" data-bs-target="#transactionsModal">View All</button>
                                    </div>
                                </div>
                                <div class="card-body p-0">
                                    <div class="table-responsive">
                                        <table class="table align-middle table-hover mb-0">
                                            <thead class="bg-light">
                                                <tr>
                                                    <th class="ps-4">Product</th>
                                                    <th>Status</th>
                                                    <th>Amount</th>
                                                    <th>Date</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody id="recent-transactions-body">
                                                <!-- Populated by JS -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div
                                class="card border-0 shadow-sm h-100 bg-primary-gradient text-white overflow-hidden position-relative">
                                <!-- Decorative circles -->
                                <div class="circle-decoration circle-1"></div>
                                <div class="circle-decoration circle-2"></div>

                                <div class="card-body p-4 position-relative">
                                    <h5 class="fw-bold mb-4">Quick Stats</h5>

                                    <div class="mb-4">
                                        <div class="d-flex justify-content-between mb-1">
                                            <span class="opacity-75">Inventory Capacity</span>
                                            <span class="fw-bold">85%</span>
                                        </div>
                                        <div class="progress bg-white-25" style="height: 6px;">
                                            <div class="progress-bar bg-white" role="progressbar" style="width: 85%">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="mb-4">
                                        <div class="d-flex justify-content-between mb-1">
                                            <span class="opacity-75">Sales Target</span>
                                            <span class="fw-bold">62%</span>
                                        </div>
                                        <div class="progress bg-white-25" style="height: 6px;">
                                            <div class="progress-bar bg-white" role="progressbar" style="width: 62%">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="d-grid mt-auto">
                                        <button class="btn btn-light text-primary fw-bold shadow-sm py-2"
                                            onclick="generateReport()">Generate
                                            Report</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Inventory View -->
                <div id="view-inventory" class="d-none fade-in">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-transparent border-0 p-4">
                            <div class="d-flex flex-wrap justify-content-between align-items-center gap-3">
                                <h5 class="fw-bold mb-0">Inventory Items</h5>
                                <div class="d-flex gap-2">
                                    <select class="form-select form-select-sm border-0 bg-light shadow-none w-auto"
                                        id="categoryFilter">
                                        <option value="All">All Categories</option>
                                        <option value="Fruits">Fruits</option>
                                        <option value="Vegetables">Vegetables</option>
                                        <option value="Dairy">Dairy</option>
                                        <option value="Beverages">Beverages</option>
                                        <option value="Snacks">Snacks</option>
                                    </select>
                                    <select class="form-select form-select-sm border-0 bg-light shadow-none w-auto"
                                        id="stockFilter">
                                        <option value="All">Stock Status</option>
                                        <option value="In Stock">In Stock</option>
                                        <option value="Low Stock">Low Stock</option>
                                        <option value="Out of Stock">Out of Stock</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-hover align-middle mb-0">
                                    <thead class="bg-light">
                                        <tr>
                                            <th class="ps-4">Product</th>
                                            <th>Category</th>
                                            <th>Price</th>
                                            <th>Stock</th>
                                            <th>Status</th>
                                            <th class="text-end pe-4">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="inventory-table-body">
                                        <!-- Populated via JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card-footer bg-transparent border-0 p-3">
                            <nav aria-label="Inventory pagination">
                                <ul class="pagination justify-content-center mb-0" id="pagination">
                                    <!-- Populated via JS -->
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>

                <!-- Analytics View -->
                <div id="view-analytics" class="d-none fade-in">
                    <div class="row g-4 mb-4">
                        <div class="col-lg-8">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-transparent border-0 p-4">
                                    <h5 class="fw-bold mb-0">Sales Overview</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="salesChart"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card border-0 shadow-sm h-100">
                                <div class="card-header bg-transparent border-0 p-4">
                                    <h5 class="fw-bold mb-0">Category Distribution</h5>
                                </div>
                                <div class="card-body d-flex align-items-center justify-content-center">
                                    <canvas id="categoryChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Add Item Modal -->
    <div class="modal fade" id="addItemModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header border-0 pb-0">
                    <h5 class="modal-title fw-bold">Add New Product</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="addItemForm">
                        <div class="mb-3">
                            <label class="form-label text-muted small">Product Name</label>
                            <input type="text" class="form-control bg-light border-0" id="productName"
                                list="productNameSuggestions" required>
                            <datalist id="productNameSuggestions"></datalist>
                        </div>
                        <div class="row g-3 mb-3">
                            <div class="col-6">
                                <label class="form-label text-muted small">Category</label>
                                <select class="form-select bg-light border-0" id="productCategory">
                                    <option value="Fruits">Fruits</option>
                                    <option value="Vegetables">Vegetables</option>
                                    <option value="Dairy">Dairy</option>
                                    <option value="Beverages">Beverages</option>
                                    <option value="Snacks">Snacks</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label class="form-label text-muted small">Price ($)</label>
                                <input type="number" step="0.01" class="form-control bg-light border-0"
                                    id="productPrice" required>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="form-label text-muted small">Initial Stock</label>
                            <input type="number" class="form-control bg-light border-0" id="productStock" required>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary-gradient py-2 fw-bold text-white shadow">Add
                                Product</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Item Modal -->
    <div class="modal fade" id="editItemModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header border-0 pb-0">
                    <h5 class="modal-title fw-bold">Edit Product</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <form id="editItemForm">
                        <input type="hidden" id="editItemId">
                        <div class="mb-3">
                            <label class="form-label text-muted small">Product Name</label>
                            <input type="text" class="form-control bg-light border-0" id="editProductName" readonly>
                            <small class="text-muted">Product name cannot be changed</small>
                        </div>
                        <div class="row g-3 mb-3">
                            <div class="col-6">
                                <label class="form-label text-muted small">Category</label>
                                <select class="form-select bg-light border-0" id="editProductCategory">
                                    <option value="Fruits">Fruits</option>
                                    <option value="Vegetables">Vegetables</option>
                                    <option value="Dairy">Dairy</option>
                                    <option value="Beverages">Beverages</option>
                                    <option value="Snacks">Snacks</option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label class="form-label text-muted small">Price ($)</label>
                                <input type="number" step="0.01" class="form-control bg-light border-0"
                                    id="editProductPrice" required>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="form-label text-muted small">Stock Quantity</label>
                            <input type="number" class="form-control bg-light border-0" id="editProductStock" required>
                        </div>
                        <div class="d-grid gap-2">
                            <button type="submit" class="btn btn-primary-gradient py-2 fw-bold text-white shadow">
                                <i class="bi bi-check-circle me-2"></i>Save Changes
                            </button>
                            <button type="button" class="btn btn-outline-secondary"
                                data-bs-dismiss="modal">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Transactions Modal -->
    <div class="modal fade" id="transactionsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header border-0 pb-0">
                    <h5 class="modal-title fw-bold">Recent Transactions</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <div class="table-responsive">
                        <table class="table table-hover align-middle">
                            <thead class="bg-light">
                                <tr>
                                    <th>Item</th>
                                    <th>Status</th>
                                    <th>Price</th>
                                    <th>Date Added</th>
                                </tr>
                            </thead>
                            <tbody id="all-transactions-body">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>

</html>